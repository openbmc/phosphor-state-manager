{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "c64c20fd_c215f66a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2025-02-03T19:37:41Z",
      "side": 1,
      "message": "I think there\u0027s a bit of confusion here. The way the code currently works is once the discovery application starts, it begins waiting for BMC Ready, using the PowerRestoreDelay value for the maximum amount of time it will wait for BMC Ready. It checks every 1s, so as soon as BMC Ready is hit, the host boot will be started. Although the discover service actually doesn\u0027t run until BMC Ready so it all kind of just happens at the same time (BMC Ready hit, APR policy enforced).\n\nMy understanding is you wanted the boot to start even sooner then BMC Ready. i.e. start once the bare minimum of BMC services are running. In that case we need to go back to https://gerrit.openbmc.org/c/openbmc/phosphor-state-manager/+/71085 where we changed the discover app to wait for BMC Ready (After\u003dmulti-user.target) and put that behind a meson feature (only-allow-boot-when-bmc-ready). So on your system, you set the PowerRestoreDelay to 0, and don\u0027t enable only-allow-boot-when-bmc-ready.",
      "revId": "12934fe35bb79e37336c025a603d0ab4a5ab5467",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eeeb8bb5_5fb831c1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1002307
      },
      "writtenOn": "2025-02-04T05:09:27Z",
      "side": 1,
      "message": "I found a bug while working on this feature. The bug:\n1) User sets PowerRestorePolicy as AlwaysOn\n2) User sets PowerRestoreDelay as 120 seconds\n3) User performs GracefulShutdown\n4) User does AC power cycle\nOnce, the BMC is up the expectation is to apply Power Policy that is AlwaysOn after 120 seconds. But, in our case we would hit BMC_READY within ~10 seconds. And then we would apply the restore policy. \n\nHence, this patch ensures that we wait for the time defined by the user.",
      "parentUuid": "c64c20fd_c215f66a",
      "revId": "12934fe35bb79e37336c025a603d0ab4a5ab5467",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8b99b636_c92226d5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1002307
      },
      "writtenOn": "2025-02-11T06:11:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "eeeb8bb5_5fb831c1",
      "revId": "12934fe35bb79e37336c025a603d0ab4a5ab5467",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53b71536_bdac131d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-02-03T21:53:18Z",
      "side": 1,
      "message": "Please don\u0027t do this kind of indirection for our project, especially not something like a github issue.  If this URL shortener goes out of business we lose all record of what you\u0027re pointing at.\n\nAnyhow, use `Resolves openbmc/phosphor-state-manager#30` and github would automatically close the issue if this were merged (and Gerrit also turns it into the appropriate URL).",
      "revId": "12934fe35bb79e37336c025a603d0ab4a5ab5467",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "00706e3b_6f91ef9c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1002307
      },
      "writtenOn": "2025-02-04T05:09:27Z",
      "side": 1,
      "message": "sure I will change that in commit message",
      "parentUuid": "53b71536_bdac131d",
      "revId": "12934fe35bb79e37336c025a603d0ab4a5ab5467",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc795667_c62d02fa",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2025-02-03T19:37:41Z",
      "side": 1,
      "message": "Hi Prithvi, please work with Deepak or Ed at your company to get added to the CLA and then added to the approved CI group.",
      "revId": "12934fe35bb79e37336c025a603d0ab4a5ab5467",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a0d7cb40_cc83d5e4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1002307
      },
      "writtenOn": "2025-02-04T05:09:27Z",
      "side": 1,
      "message": "sure I will do that.",
      "parentUuid": "cc795667_c62d02fa",
      "revId": "12934fe35bb79e37336c025a603d0ab4a5ab5467",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d1e4221c_86c36a55",
        "filename": "utils.cpp",
        "patchSetId": 3
      },
      "lineNbr": 260,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-02-03T21:53:18Z",
      "side": 1,
      "message": "This seems like it only explicitly makes things worse.  Now instead of waiting for up to N seconds we\u0027re always waiting for N seconds.",
      "revId": "12934fe35bb79e37336c025a603d0ab4a5ab5467",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cdc342a7_53c4c05b",
        "filename": "utils.cpp",
        "patchSetId": 3
      },
      "lineNbr": 260,
      "author": {
        "id": 1002307
      },
      "writtenOn": "2025-02-04T05:09:27Z",
      "side": 1,
      "message": "I found a bug while working on this feature. The bug:\n1) User sets PowerRestorePolicy as AlwaysOn\n2) User sets PowerRestoreDelay as 120 seconds\n3) User performs GracefulShutdown \n4) User does AC power cycle\nOnce, the BMC is up the expectation is to apply Power Policy that is AlwaysOn after 120 seconds. But, in our case we would hit BMC_READY within ~10 seconds.",
      "parentUuid": "d1e4221c_86c36a55",
      "revId": "12934fe35bb79e37336c025a603d0ab4a5ab5467",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fe93f0cd_ae550dba",
        "filename": "utils.cpp",
        "patchSetId": 3
      },
      "lineNbr": 260,
      "author": {
        "id": 1002307
      },
      "writtenOn": "2025-02-11T06:11:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cdc342a7_53c4c05b",
      "revId": "12934fe35bb79e37336c025a603d0ab4a5ab5467",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}