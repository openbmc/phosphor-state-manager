{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "155361c0_5260a79a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2025-06-23T20:37:22Z",
      "side": 1,
      "message": "Interesting. So on our systems, /run is a tmpfs that is cleared on any BMC reboot. Is that not the case on your system?",
      "revId": "687aa18049e449dc925a37e387dd3db427b55c15",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "59d5c1d2_444112b4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001906
      },
      "writtenOn": "2025-06-24T01:43:30Z",
      "side": 1,
      "message": "/run is a tmpfs file system in our system, and the file in question should be created by this code.\n\nIn the AC power-on case, the host-on file can be removed by startmin. However, in the BMC reboot case, we noticed that the file was not removed. During that time, if we execute a DC cycle or the on/off command, the power-on service will be blocked or ignored due to the condition ConditionPathExists\u003d!/run/openbmc/host@%i-on, which is included in most services.\n\nShould the host-on flag be removed after the power-on initialization is complete? Iâ€™m not entirely sure what this flag is used for.",
      "parentUuid": "155361c0_5260a79a",
      "revId": "687aa18049e449dc925a37e387dd3db427b55c15",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5977ed18_21414d34",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001906
      },
      "writtenOn": "2025-06-24T02:06:03Z",
      "side": 1,
      "message": "The file should be created by this code.\nhttps://github.com/openbmc/phosphor-state-manager/blob/master/host_check.cpp#L199",
      "parentUuid": "59d5c1d2_444112b4",
      "revId": "687aa18049e449dc925a37e387dd3db427b55c15",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ddd64d0e_4a8b2a33",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2025-06-24T13:01:59Z",
      "side": 1,
      "message": "Hey Peter, I think I\u0027m just a bit confused on your use case. You say in the commit message \"unexpected BMC reboot causes the host-on condition to remain uncleared\". If the BMC is rebooted, the file in /run should be deleted due to the tmpfs nature of the filesystem.",
      "parentUuid": "5977ed18_21414d34",
      "revId": "687aa18049e449dc925a37e387dd3db427b55c15",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a7d71e4b_25f121a2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001906
      },
      "writtenOn": "2025-06-25T02:25:43Z",
      "side": 1,
      "message": "Yes, this file is deleted by a reboot or watchdog, but the host@%i-on file is created by isHostRunning(). So I did a test: I deleted the file and then restarted xyz.openbmc_project.State.Host@0.service, and we can find the host@%i-on again.",
      "parentUuid": "ddd64d0e_4a8b2a33",
      "revId": "687aa18049e449dc925a37e387dd3db427b55c15",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a30afc9_a6445246",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2025-07-01T20:35:03Z",
      "side": 1,
      "message": "Ok, that sounds legitimate. So if the host service is restarted while the host is running, that file would get recreated and not cleared until we boot the host again. Please update the commit message with this use case.",
      "parentUuid": "a7d71e4b_25f121a2",
      "revId": "687aa18049e449dc925a37e387dd3db427b55c15",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a3604318_d5c02aef",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001906
      },
      "writtenOn": "2025-07-02T02:14:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2a30afc9_a6445246",
      "revId": "687aa18049e449dc925a37e387dd3db427b55c15",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}